---
layout: post
title: When.js Vs Ramda
tag: 
---

<p>Something unfortunate happened to me over the weekend... I was writing code using the great <a href="http://ramdajs.com/">Ramda</a>, there was promises going on and the code was wonderful... Then along came the awesome <a href="https://github.com/cujojs/when">When.js</a> to solve my more complicated future based problems but this made me write code like the following:</p><pre><code>return when.map(<br />    R.map(getUserIds, sittings),<br />    whenGuard(whenGuard.n(1), getUsers)<br />).then(processUser);</code></pre><p>This was enough to make me cry. It's not that I don't love both of these tools but the fact that Ramda takes it's arguments in the proper way <code>R.map(mapping_function, what_to_map_over)</code> (because it does <a href="http://hughfdjackson.com/javascript/why-curry-helps/">currying</a>) while when.js does the more javascript centric way of <code>when.map(what_to_map_over, mapping_function)</code> makes absolutely horrible code!</p><p>So I'm sold on Ramda already, it's a lot nicer to work with than <a href="http://underscorejs.org/">other</a> <a href="https://lodash.com/">libraries</a> though I do appreciate them existing because at least they have made some people think in different ways than they used to. Still flip flopping of parameter order in my code has to be stopped right now.</p><p>While thinking about this I realised that I was only using <code>when.all</code>, <code>when.map</code> (always with a guard of 1) and the standard promise functionality from when.js. The guard of 1 is a really important point, this is essentially a limit on concurrency, saying only do one asynchronous operation at once. So <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all"><code>Promise.all</code></a> I already have if I switch to Node v0.11 or polyfill it later so all I need to do is hack up a sequential promise mapper and I'll have a much lighter set of code...</p><p>So I did, you can get it at <a href="https://github.com/forbesmyester/rstyle-sequential-promise-map">GitHub</a> or via <a href="https://www.npmjs.com/package/rstyle-sequential-promise-map">npm</a>.</p>
